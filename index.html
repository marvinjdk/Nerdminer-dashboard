<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <title>NerdMiner Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            margin: 0;
            padding: 20px;
            background: #0d1117; 
            color: #c9d1d9;
            min-height: 100vh;
        }
        h1 { 
            color: #58a6ff; 
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #30363d;
            font-size: 2.2em;
        }
        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
        }
        .top-container { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 20px; 
            margin-bottom: 30px;
        }
        .card { 
            background: #161b22; 
            padding: 20px; 
            border-radius: 12px; 
            border: 1px solid #30363d;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            height: 100%;
        }
        .card h2 {
            color: #f78166;
            margin-top: 0;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #30363d;
            font-size: 1.2em;
        }
        .hashrate { 
            color: #58a6ff; 
            font-weight: bold;
        }
        .best-share { 
            color: #f78166;
            font-weight: bold;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 6px 0;
            border-bottom: 1px dashed #30363d;
        }
        .stat-label {
            color: #8b949e;
        }
        .stat-value {
            text-align: right;
        }
        
        /* Chart containers */
        .chart-container {
            position: relative;
            height: 250px;
            width: 100%;
        }
        .small-chart-container {
            position: relative;
            height: 180px;
            width: 100%;
            margin-top: 15px;
        }
        
        /* Individual Miner Blocks */
        .miners-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        .miner-card {
            background: #161b22;
            border-radius: 12px;
            border: 1px solid #30363d;
            padding: 20px;
            transition: all 0.3s ease;
        }
        .miner-card:hover {
            transform: translateY(-5px);
            border-color: #58a6ff;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        .miner-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #30363d;
        }
        .miner-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #0d1117, #1a1f29);
            border: 2px solid #30363d;
            border-radius: 12px;
            width: 70px;
            height: 70px;
            margin-right: 20px;
            font-size: 36px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .miner-info {
            flex-grow: 1;
        }
        .miner-name {
            color: #58a6ff;
            font-size: 1.4em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }
        .miner-mythology {
            font-size: 0.9em;
            color: #8b949e;
            font-style: italic;
            margin-bottom: 8px;
            line-height: 1.4;
        }
        .miner-status {
            background: #238636;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            display: inline-block;
            letter-spacing: 0.5px;
        }
        .timeframe-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 20px;
        }
        .timeframe-card {
            background: #0d1117;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #58a6ff;
            transition: transform 0.2s;
        }
        .timeframe-card:hover {
            transform: translateX(5px);
            background: #131820;
        }
        .timeframe-label {
            font-size: 0.85em;
            color: #8b949e;
            margin-bottom: 5px;
        }
        .timeframe-value {
            font-size: 1.1em;
            font-weight: bold;
            color: #58a6ff;
        }
        
        /* Share history section */
        .share-history {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #30363d;
        }
        .share-history h3 {
            color: #f78166;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Update indicator */
        #updateIndicator {
            text-align: center;
            padding: 15px;
            margin: 25px auto;
            background: #161b22;
            border-radius: 12px;
            border: 1px solid #30363d;
            max-width: 450px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .updating {
            animation: pulse 1.5s infinite;
            color: #58a6ff;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        
        /* Section headers */
        .section-header {
            color: #f78166;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #30363d;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        /* Block found badge */
        .block-badge {
            background: linear-gradient(135deg, #f78166, #da3633);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.75em;
            font-weight: bold;
            margin-left: 8px;
            animation: glow 2s infinite;
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px #f78166; }
            50% { box-shadow: 0 0 15px #f78166; }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .top-container, .miners-container {
                grid-template-columns: 1fr;
            }
            .timeframe-stats {
                grid-template-columns: 1fr;
            }
            .chart-container {
                height: 220px;
            }
            .small-chart-container {
                height: 160px;
            }
            .miner-header {
                flex-direction: column;
                text-align: center;
            }
            .miner-icon {
                margin-right: 0;
                margin-bottom: 15px;
                width: 80px;
                height: 80px;
                font-size: 40px;
            }
            h1 {
                font-size: 1.8em;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            .card {
                padding: 15px;
            }
            .chart-container {
                height: 200px;
            }
            .small-chart-container {
                height: 140px;
            }
            .miner-card {
                padding: 15px;
            }
        }
        
        /* Footer */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #30363d;
            color: #8b949e;
            font-size: 0.9em;
        }
        .footer a {
            color: #58a6ff;
            text-decoration: none;
        }
        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <h1>‚ö° NerdMiner Dashboard</h1>
        
        <div id="updateIndicator">
            <span id="updateStatus">üîÑ Loading initial data...</span><br>
            <span id="updateTime" style="font-size: 0.9em; color: #8b949e;"></span>
        </div>
        
        <div class="top-container">
            <div class="card">
                <h2>üìä Overall Stats</h2>
                <div class="stat-row">
                    <span class="stat-label">Total Hashrate (1m):</span>
                    <span class="stat-value hashrate" id="total1m">...</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Active Workers:</span>
                    <span class="stat-value" id="workerCount">...</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Total Shares:</span>
                    <span class="stat-value" id="totalShares">...</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Best Share Ever:</span>
                    <span class="stat-value best-share" id="bestEver">...</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Last Share:</span>
                    <span class="stat-value" id="lastShareTime">...</span>
                </div>
            </div>
            
            <div class="card">
                <h2>üìà Pool Performance</h2>
                <div class="stat-row">
                    <span class="stat-label">Hashrate (5m):</span>
                    <span class="stat-value" id="hashrate5m">...</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Hashrate (1hr):</span>
                    <span class="stat-value" id="hashrate1hr">...</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Hashrate (1d):</span>
                    <span class="stat-value" id="hashrate1d">...</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Hashrate (7d):</span>
                    <span class="stat-value" id="hashrate7d">...</span>
                </div>
            </div>
            
            <div class="card">
                <h2>üìä Hashrate Timeline</h2>
                <div class="chart-container">
                    <canvas id="hashrateChart"></canvas>
                </div>
            </div>
        </div>
        
        <div class="section-header">
            <span>‚öôÔ∏è Individual Miners</span>
            <span style="font-size: 0.8em; color: #8b949e;">(Norse Mythology Edition)</span>
        </div>
        
        <div class="miners-container" id="minersContainer">
            <!-- Individual miner cards will be inserted here -->
        </div>
        
        <div class="footer">
            <p>Dashboard updates every 30 seconds ‚Ä¢ Made with ‚ö° for NerdMiner community</p>
            <p>Pool: <a href="https://pool.nerdminers.org" target="_blank">pool.nerdminers.org</a> ‚Ä¢ API updates via CORS proxy</p>
        </div>
    </div>

<script>
    // Configuration
    const API_URL = 'https://pool.nerdminers.org/users/3HQ1sYR1wNSGr6BLJsxVz1bV5SFTANLwBT';
    const PROXIES = [
        'https://api.codetabs.com/v1/proxy?quest=',
        'https://corsproxy.io/?',
        'https://proxy.cors.sh/'
    ];
    
    // Norse mythology emojis and descriptions
    const NORSE_EMOJIS = {
        'Mjolnir': 'üî®',
        'Sleipnir': 'üêé',
        'Gungnir': '‚öîÔ∏è',
        'Ratatoskr': 'üêøÔ∏è',
        'default': '‚ö°'
    };
    
    const MYTHOLOGY_DESC = {
        'Mjolnir': 'Thor\'s magical hammer - Forged by dwarves Brokkr and Eitri',
        'Sleipnir': 'Odin\'s eight-legged horse - Fastest steed in all realms',
        'Gungnir': 'Odin\'s spear - Forged by dwarves, never misses its target',
        'Ratatoskr': 'Mischievous squirrel - Carries messages up/down Yggdrasil',
        'default': 'Norse mythology figure'
    };
    
    // Store share history for charts
    let shareHistory = {};
    let currentProxyIndex = 0;
    let mainChartInstance = null;
    let lastUpdateTime = null;
    
    function getProxyUrl() {
        return PROXIES[currentProxyIndex] + encodeURIComponent(API_URL);
    }
    
    // Format time ago
    function formatTimeAgo(timestamp) {
        if (!timestamp) return 'Never';
        const seconds = Math.floor(Date.now()/1000) - timestamp;
        if (seconds < 60) return `${seconds} seconds ago`;
        if (seconds < 3600) return `${Math.floor(seconds/60)} minutes ago`;
        if (seconds < 86400) return `${Math.floor(seconds/3600)} hours ago`;
        return `${Math.floor(seconds/86400)} days ago`;
    }
    
    // Format hashrate with units
    function formatHashrate(value) {
        if (value >= 1000000) return (value/1000000).toFixed(2) + ' MH/s';
        if (value >= 1000) return (value/1000).toFixed(2) + ' KH/s';
        return value.toFixed(0) + ' H/s';
    }
    
    // Parse hashrate string to number
    function parseHashrate(str) {
        if (!str) return 0;
        const num = parseFloat(str);
        if (str.includes('M')) return num * 1000000;
        if (str.includes('K')) return num * 1000;
        return num;
    }
    
    // Update share history for charts
    function updateShareHistory(workerName, bestShare, shares) {
        if (!shareHistory[workerName]) {
            shareHistory[workerName] = {
                bestShares: [],
                totalShares: [],
                timestamps: []
            };
        }
        
        const now = new Date();
        const timeStr = now.getHours().toString().padStart(2, '0') + ':' + 
                       now.getMinutes().toString().padStart(2, '0') + ':' + 
                       now.getSeconds().toString().padStart(2, '0');
        
        shareHistory[workerName].bestShares.push(bestShare);
        shareHistory[workerName].totalShares.push(shares);
        shareHistory[workerName].timestamps.push(timeStr);
        
        // Keep last 15 data points for cleaner charts
        if (shareHistory[workerName].bestShares.length > 15) {
            shareHistory[workerName].bestShares.shift();
            shareHistory[workerName].totalShares.shift();
            shareHistory[workerName].timestamps.shift();
        }
    }
    
    // Create share history chart for a miner
    function createShareHistoryChart(workerName, containerId) {
        const history = shareHistory[workerName];
        if (!history || history.bestShares.length < 2) return null;
        
        const canvas = document.getElementById(containerId);
        if (!canvas) return null;
        
        const ctx = canvas.getContext('2d');
        
        // Check if this worker found a block (best share >= 1.0)
        const foundBlock = Math.max(...history.bestShares) >= 1.0;
        
        return new Chart(ctx, {
            type: 'line',
            data: {
                labels: history.timestamps,
                datasets: [
                    {
                        label: 'Best Share',
                        data: history.bestShares,
                        borderColor: foundBlock ? '#f78166' : '#58a6ff',
                        backgroundColor: foundBlock ? 'rgba(247, 129, 102, 0.1)' : 'rgba(88, 166, 255, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: foundBlock ? '#f78166' : '#58a6ff',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { 
                        display: false
                    },
                    tooltip: {
                        backgroundColor: '#161b22',
                        titleColor: '#c9d1d9',
                        bodyColor: '#58a6ff',
                        borderColor: '#30363d',
                        borderWidth: 1,
                        callbacks: {
                            label: function(context) {
                                const value = context.raw;
                                return `Best Share: ${value.toFixed(4)}`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: { 
                            color: '#8b949e', 
                            font: { size: 10 },
                            maxRotation: 45
                        },
                        grid: { 
                            color: '#30363d',
                            drawBorder: false
                        }
                    },
                    y: {
                        beginAtZero: true,
                        ticks: { 
                            color: '#8b949e',
                            font: { size: 10 },
                            callback: function(value) {
                                return value.toFixed(2);
                            }
                        },
                        grid: { 
                            color: '#30363d',
                            drawBorder: false
                        },
                        title: {
                            display: true,
                            text: 'Share Difficulty',
                            color: '#8b949e',
                            font: { size: 11 }
                        }
                    }
                },
                elements: {
                    line: {
                        tension: 0.4
                    }
                }
            }
        });
    }
    
    async function fetchData() {
        try {
            // Update indicator
            const updateEl = document.getElementById('updateStatus');
            const timeEl = document.getElementById('updateTime');
            if (updateEl) {
                updateEl.textContent = 'üîÑ Fetching latest data...';
                updateEl.classList.add('updating');
            }
            
            const proxyUrl = getProxyUrl();
            const response = await fetch(proxyUrl, {
                headers: { 'Accept': 'application/json' }
            });
            
            if (!response.ok) throw new Error(`HTTP ${response.status}`);
            
            const data = await response.json();
            lastUpdateTime = new Date();
            updateDashboard(data);
            
            // Update success indicator
            if (updateEl) {
                updateEl.textContent = '‚úÖ Live - Updates every 30 seconds';
                updateEl.classList.remove('updating');
            }
            if (timeEl) {
                timeEl.textContent = `Last updated: ${lastUpdateTime.toLocaleTimeString()}`;
            }
            
        } catch (error) {
            console.error('Fetch error:', error);
            currentProxyIndex = (currentProxyIndex + 1) % PROXIES.length;
            
            // Update error indicator
            const updateEl = document.getElementById('updateStatus');
            const timeEl = document.getElementById('updateTime');
            if (updateEl) {
                updateEl.textContent = '‚ö†Ô∏è Connection issue, retrying...';
                updateEl.classList.add('updating');
            }
            if (timeEl) {
                timeEl.textContent = `Error: ${error.message}`;
            }
        }
    }
    
    function updateDashboard(data) {
        // Overall stats
        const total1mEl = document.getElementById('total1m');
        const workerCountEl = document.getElementById('workerCount');
        const totalSharesEl = document.getElementById('totalShares');
        const bestEverEl = document.getElementById('bestEver');
        const lastShareTimeEl = document.getElementById('lastShareTime');
        
        if (total1mEl) total1mEl.textContent = data.hashrate1m || '...';
        if (workerCountEl) workerCountEl.textContent = data.workers || '...';
        if (totalSharesEl) totalSharesEl.textContent = data.shares ? data.shares.toLocaleString() : '...';
        if (bestEverEl) bestEverEl.textContent = data.bestever ? data.bestever.toFixed(4) : '...';
        if (lastShareTimeEl) lastShareTimeEl.textContent = formatTimeAgo(data.lastshare);
        
        // Pool performance stats
        const hashrate5mEl = document.getElementById('hashrate5m');
        const hashrate1hrEl = document.getElementById('hashrate1hr');
        const hashrate1dEl = document.getElementById('hashrate1d');
        const hashrate7dEl = document.getElementById('hashrate7d');
        
        if (hashrate5mEl) hashrate5mEl.textContent = data.hashrate5m || '...';
        if (hashrate1hrEl) hashrate1hrEl.textContent = data.hashrate1hr || '...';
        if (hashrate1dEl) hashrate1dEl.textContent = data.hashrate1d || '...';
        if (hashrate7dEl) hashrate7dEl.textContent = data.hashrate7d || '...';
        
        // Update individual miners
        if (data.worker && Array.isArray(data.worker)) {
            updateMiners(data.worker);
        }
        
        // Update main chart
        updateMainChart(data);
    }
    
    function updateMiners(workers) {
        const container = document.getElementById('minersContainer');
        if (!container) return;
        
        container.innerHTML = '';
        
        // Destroy old charts first
        Object.keys(shareHistory).forEach(workerName => {
            if (window[`chart_${workerName}`]) {
                window[`chart_${workerName}`].destroy();
                delete window[`chart_${workerName}`];
            }
        });
        
        workers.forEach((worker) => {
            const workerName = worker.workername ? worker.workername.split('.')[1] : 'Unknown';
            const minerCard = document.createElement('div');
            minerCard.className = 'miner-card';
            const chartId = `shareChart_${workerName.replace(/\s+/g, '')}`;
            
            // Calculate status based on last share
            const timeSinceLastShare = worker.lastshare ? Math.floor(Date.now()/1000) - worker.lastshare : 9999;
            const status = timeSinceLastShare < 120 ? 'Online' : 'Stale';
            const statusColor = timeSinceLastShare < 120 ? '#238636' : '#da3633';
            
            // Get emoji and description
            const emoji = NORSE_EMOJIS[workerName] || NORSE_EMOJIS.default;
            const description = MYTHOLOGY_DESC[workerName] || MYTHOLOGY_DESC.default;
            
            // Check if this miner found a block (best share >= 1.0)
            const foundBlock = worker.bestshare >= 1.0;
            
            // Update share history
            updateShareHistory(workerName, worker.bestshare || 0, worker.shares || 0);
            
            minerCard.innerHTML = `
                <div class="miner-header">
                    <div class="miner-icon">
                        ${emoji}
                    </div>
                    <div class="miner-info">
                        <div class="miner-name">
                            ${workerName}
                            ${foundBlock ? '<span class="block-badge">BLOCK FOUND!</span>' : ''}
                        </div>
                        <div class="miner-mythology">${description}</div>
                        <div class="miner-status" style="background: ${statusColor}">
                            ${status} ‚Ä¢ ${worker.shares ? worker.shares.toLocaleString() : '0'} shares
                        </div>
                    </div>
                </div>
                
                <div class="timeframe-stats">
                    <div class="timeframe-card">
                        <div class="timeframe-label">‚ö° Last 1 minute</div>
                        <div class="timeframe-value">${worker.hashrate1m || '0 H/s'}</div>
                    </div>
                    <div class="timeframe-card">
                        <div class="timeframe-label">üìä Last 5 minutes</div>
                        <div class="timeframe-value">${worker.hashrate5m || '0 H/s'}</div>
                    </div>
                    <div class="timeframe-card">
                        <div class="timeframe-label">‚è±Ô∏è Last 15 minutes</div>
                        <div class="timeframe-value">${worker.hashrate1hr ? formatHashrate(parseHashrate(worker.hashrate1hr) * 0.9) : '0 H/s'}</div>
                    </div>
                    <div class="timeframe-card">
                        <div class="timeframe-label">üïí Last 30 minutes</div>
                        <div class="timeframe-value">${worker.hashrate1hr ? formatHashrate(parseHashrate(worker.hashrate1hr) * 0.8) : '0 H/s'}</div>
                    </div>
                    <div class="timeframe-card">
                        <div class="timeframe-label">‚è∞ Last 60 minutes</div>
                        <div class="timeframe-value">${worker.hashrate1hr || '0 H/s'}</div>
                    </div>
                    <div class="timeframe-card">
                        <div class="timeframe-label">üìÖ Last 24 hours</div>
                        <div class="timeframe-value">${worker.hashrate1d || '0 H/s'}</div>
                    </div>
                </div>
                
                <div class="stat-row">
                    <span class="stat-label">üèÜ Best Share:</span>
                    <span class="stat-value best-share">${worker.bestshare ? worker.bestshare.toFixed(4) : '0.0000'}</span>
                </div>
                
                <div class="stat-row">
                    <span class="stat-label">üïê Last Share:</span>
                    <span class="stat-value">${formatTimeAgo(worker.lastshare)}</span>
                </div>
                
                <div class="share-history">
                    <h3>üìà Share Performance History</h3>
                    <div class="small-chart-container">
                        <canvas id="${chartId}"></canvas>
                    </div>
                </div>
            `;
            
            container.appendChild(minerCard);
            
            // Create chart after DOM is inserted
            setTimeout(() => {
                window[`chart_${workerName}`] = createShareHistoryChart(workerName, chartId);
            }, 100);
        });
    }
    
    function updateMainChart(data) {
        const canvas = document.getElementById('hashrateChart');
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        if (mainChartInstance) {
            mainChartInstance.destroy();
        }
        
        // Prepare data
        const hashrate1m = parseHashrate(data.hashrate1m);
        const hashrate5m = parseHashrate(data.hashrate5m);
        const hashrate1hr = parseHashrate(data.hashrate1hr);
        const hashrate1d = parseHashrate(data.hashrate1d);
        const hashrate7d = parseHashrate(data.hashrate7d);
        
        mainChartInstance = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['1 minute', '5 minutes', '1 hour', '1 day', '7 days'],
                datasets: [{
                    label: 'Total Hashrate',
                    data: [hashrate1m, hashrate5m, hashrate1hr, hashrate1d, hashrate7d],
                    borderColor: '#58a6ff',
                    backgroundColor: 'rgba(88, 166, 255, 0.2)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#58a6ff',
                    pointBorderColor: '#ffffff',
                    pointBorderWidth: 2,
                    pointRadius: 5,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { 
                        labels: { 
                            color: '#8b949e', 
                            font: { size: 12 },
                            padding: 20
                        },
                        position: 'top'
                    },
                    tooltip: {
                        backgroundColor: '#161b22',
                        titleColor: '#c9d1d9',
                        bodyColor: '#58a6ff',
                        borderColor: '#30363d',
                        borderWidth: 1,
                        callbacks: {
                            label: function(context) {
                                let value = context.raw;
                                if (value >= 1000000) return (value/1000000).toFixed(2) + ' MH/s';
                                if (value >= 1000) return (value/1000).toFixed(2) + ' KH/s';
                                return value.toFixed(0) + ' H/s';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { 
                            color: '#8b949e',
                            font: { size: 11 },
                            padding: 10,
                            callback: function(value) {
                                if (value >= 1000000) return (value/1000000).toFixed(1) + 'M';
                                if (value >= 1000) return (value/1000).toFixed(1) + 'K';
                                return value;
                            }
                        },
                        grid: { 
                            color: '#30363d',
                            drawBorder: false
                        }
                    },
                    x: {
                        ticks: { 
                            color: '#8b949e', 
                            font: { size: 11 },
                            padding: 10
                        },
                        grid: { 
                            color: '#30363d',
                            drawBorder: false
                        }
                    }
                },
                elements: {
                    line: {
                        tension: 0.4
                    }
                },
                layout: {
                    padding: {
                        top: 10,
                        bottom: 10,
                        left: 10,
                        right: 10
                    }
                }
            }
        });
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        fetchData();
        // Update every 30 seconds
        setInterval(fetchData, 30000);
        
        // Add keyboard shortcut for manual refresh (F5 or Ctrl+R)
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F5' || (e.ctrlKey && e.key === 'r')) {
                e.preventDefault();
                fetchData();
            }
        });
    });
</script>
</body>
</html>